---
import Layout from '../layouts/Layout.astro';
import Navbar from '../components/navbar.astro';

const response = await fetch(
	'https://api-us-east-1.hygraph.com/v2/cl7onpa6g3ca001um2dezbwm8/master',
	{
		method: 'POST',
		headers: {
			'Content-Type': 'application/json',
      		Accept: 'application/json',
		},
		body: JSON.stringify({
      query: `
        {
          sections {
			image {
      			width
      			height
      			url
    		}
          }
        }
      	`,
    	}),
	}
)

const homePage = await response.json()
const data = homePage.data.sections[0]
---

<Layout title="ezrachai">
	<div class="py-10 max-w-7xl mx-auto grid grid-cols-2 dark:text-white">
		<div class=" col-span-2">
			<h1 class="text-3xl lg:text-5xl font-bold text-center max-w-lg mx-auto leading-[1.2]">Simplicity. <br> Aesthetics. Value.</h1>
			<p class="max-w-lg mx-auto text-base px-4 lg:px-0 lg:text-lg text-center mt-6 lg:mt-10 font-medium dark:text-zinc-400">Hi there, I'm a Frontend Engineer & Student focused on application for brands that like to have fun.</p>
		</div>
		<div class="py-14 mb-20 lg:py-20 overflow-hidden col-span-2">
			<div class="container flex px-4 justify-center">
				<div class="image-container">
					<div id="mask" class="mask invisible relative w-8/10 h-8/10 overflow-hidden">
						<img class=" object-cover" src={data.image.url} width={data.image.width/1.5} height={data.image.height/1.5} alt={"Image"}/>
					</div>
				</div>
			</div>
		</div>
	</div>
</Layout>

<script is:inline src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.1/gsap.min.js"></script>
<script is:inline src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.1/ScrollTrigger.min.js"></script>

<script is:inline>

	gsap.registerPlugin(ScrollTrigger)

	const masks = document.querySelectorAll("#mask")

	masks.forEach(mask => {
		let image = mask.querySelector('img')

		let tl = gsap.timeline({
		scrollTrigger: {
			trigger: mask,
			toggleActions: "restart none none reset"
		}
		})

		tl.to(mask,1, {css: {visibility: "visible"}})

		tl.from(mask, 1.5, {
			xPercent: -130,
			ease: Power2.easeOut
		})

		tl.from(image, 1.5, {
			xPercent: 100,
			scale: 1.3,
			delay: -1.5,
			ease: Power2.easeOut
		})
		
	})

	

</script>